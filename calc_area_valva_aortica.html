<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>√Årea da Valva A√≥rtica (Equa√ß√£o da Continuidade)</title>
    <style>
      :root {
        --bg: #0b1220;
        --panel: #121a2b;
        --text: #e6edf3;
        --muted: #9fb0c0;
        --accent: #69b3ff;
        --danger: #ff6b6b;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        background: radial-gradient(1200px 600px at 10% -10%, #12213c, transparent),
                    radial-gradient(900px 500px at 110% -10%, #1a2a48, transparent),
                    var(--bg);
        color: var(--text);
        line-height: 1.45;
      }
      .container {
        max-width: 720px;
        margin: 48px auto;
        padding: 24px;
        background: color-mix(in oklab, var(--panel) 92%, #000 8%);
        border: 1px solid #1f2c45;
        border-radius: 14px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.35);
      }
      h1 {
        margin: 0 0 8px;
        font-size: 1.4rem;
        letter-spacing: 0.2px;
      }
      p.sub {
        margin: 0 0 18px;
        color: var(--muted);
        font-size: 0.95rem;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
      }
      @media (max-width: 720px) {
        .grid { grid-template-columns: 1fr; }
      }
      label {
        display: block;
        font-size: 0.9rem;
        color: var(--muted);
        margin-bottom: 4px;
      }
      .field {
        display: flex;
        flex-direction: column;
        background: #0d1526;
        border: 1px solid #243557;
        border-radius: 10px;
        padding: 12px 12px 10px;
      }
      .field.span-3 {
        grid-column: span 3;
      }
      .field input[type="text"] {
        margin-top: 6px;
        background: transparent;
        color: var(--text);
        border: none;
        outline: none;
        font-size: 1.05rem;
      }
      .field-row {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        margin-top: 8px;
      }
      .subfield {
        flex: 1;
        min-width: 140px;
        display: flex;
        flex-direction: column;
      }
      .subfield label {
        font-size: 0.8rem;
        color: var(--muted);
        margin-bottom: 4px;
      }
      .suffix {
        color: var(--muted);
        font-size: 0.85rem;
      }
      .results {
        margin-top: 18px;
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 12px;
      }
      @media (max-width: 720px) {
        .results { grid-template-columns: 1fr; }
      }
      .card {
        background: #0d1526;
        border: 1px solid #243557;
        border-radius: 10px;
        padding: 14px;
      }
      .value {
        font-size: 1.6rem;
        font-weight: 600;
        color: var(--accent);
      }
      .value-sm {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--accent);
      }
      .unit {
        color: var(--muted);
        font-size: 0.95rem;
        margin-left: 6px;
      }
      .formula {
        margin-top: 14px;
        color: var(--muted);
        font-size: 0.9rem;
      }
      .warning {
        margin-top: 8px;
        color: var(--danger);
        font-size: 0.92rem;
        display: none;
      }
      .foot {
        margin-top: 8px;
        color: var(--muted);
        font-size: 0.85rem;
      }
      .small { font-size: 0.9rem; color: var(--muted); }
      .help-link{
        display:inline-flex;
        justify-content:center;
        align-items:center;
        width:18px;
        height:18px;
        border-radius:50%;
        background: rgba(105,179,255,0.15);
        color: var(--accent);
        font-size:0.75rem;
        margin-left:6px;
        text-decoration:none;
        border:1px solid rgba(105,179,255,0.35);
      }
      .help-link:hover{
        background: rgba(105,179,255,0.25);
      }
      .info-block{
        margin-top:32px;
        background:#0d1526;
        border:1px solid #243557;
        border-radius:12px;
        padding:20px;
        display:grid;
        gap:14px;
      }
      .info-block h3{
        margin:0;
        font-size:1.05rem;
        color:var(--accent);
      }
      .info-block h4{
        margin:0;
        font-size:0.95rem;
        color:var(--text);
      }
      .info-block p, .info-block li{
        color:var(--muted);
        font-size:0.9rem;
        line-height:1.5;
      }
      .info-block ol{
        margin:0;
        padding-left:18px;
        display:grid;
        gap:10px;
      }
      details.explain{
        margin-top:12px;
        background:#0d1526;
        border:1px solid #243557;
        border-radius:10px;
        padding:16px;
      }
      details.explain[open]{
        border-color:var(--accent);
      }
      details.explain summary{
        list-style:none;
        cursor:pointer;
        display:flex;
        align-items:center;
        gap:8px;
        color:var(--accent);
        font-weight:600;
      }
      details.explain summary::marker{
        content:'';
      }
      details.explain p{
        margin:8px 0;
      }
      details.explain ul, details.explain ol{
        margin-top:8px;
        padding-left:18px;
      }
      details.explain .small-table{
        margin-top:10px;
        border-collapse:collapse;
        width:100%;
        font-size:0.85rem;
      }
      details.explain .small-table th,
      details.explain .small-table td{
        border:1px solid #243557;
        padding:6px 8px;
        text-align:left;
      }
      details.explain .small-table th{
        color:var(--accent);
        background:rgba(105,179,255,0.08);
      }
      .actions{
        margin-top:18px;
        display:flex;
        flex-wrap:wrap;
        align-items:center;
        gap:12px;
      }
      .copy-btn{
        background:var(--accent);
        color:#031020;
        border:none;
        border-radius:8px;
        padding:10px 16px;
        font-size:0.95rem;
        font-weight:600;
        cursor:pointer;
        transition:background 0.2s ease, transform 0.2s ease;
      }
      .copy-btn:hover{
        background:#7ec0ff;
      }
      .copy-btn:active{
        transform:translateY(1px);
      }
      .copy-status{
        font-size:0.85rem;
        color:var(--muted);
        min-height:1em;
      }
      .copy-status.success{
        color:var(--accent);
      }
      .copy-status.error{
        color:var(--danger);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>√Årea da Valva A√≥rtica</h1>
      <p class="sub">Estimativa de taxa de fluxo e outros par√¢metros associados

      <div class="grid">
        <div class="field">
          <label for="vtiLvot">VTI VSVE <span class="suffix">(cm)</span></label>
          <input id="vtiLvot" inputmode="decimal" placeholder="ex.: 20,5" type="text" />
        </div>
        <div class="field">
          <label for="vtiAo">VTI Ao <span class="suffix">(cm)</span></label>
          <input id="vtiAo" inputmode="decimal" placeholder="ex.: 40,0" type="text" />
        </div>
        <div class="field">
          <label for="diametro">Di√¢metro VSVE <span class="suffix">(cm)</span></label>
          <input id="diametro" inputmode="decimal" placeholder="ex.: 2,0" type="text" />
        </div>
        <div class="field">
          <label for="gradienteMedio">Gradiente m√©dio <span class="suffix">(mmHg)</span></label>
          <input id="gradienteMedio" inputmode="decimal" placeholder="ex.: 40" type="text" />
        </div>
        <div class="field">
          <label for="velocidadeMax">Velocidade m√°xima <span class="suffix">(m/s)</span></label>
          <input id="velocidadeMax" inputmode="decimal" placeholder="ex.: 4,5" type="text" />
        </div>
        <div class="field span-3">
          <label>Dados antropom√©tricos (opcionais)</label>
          <div class="field-row">
            <div class="subfield">
              <label for="peso">Peso <span class="suffix">(kg)</span></label>
              <input id="peso" inputmode="decimal" placeholder="ex.: 70" type="text" />
            </div>
            <div class="subfield">
              <label for="altura">Altura <span class="suffix">(cm)</span></label>
              <input id="altura" inputmode="decimal" placeholder="ex.: 170" type="text" />
            </div>
            <div class="subfield">
              <label>Superf√≠cie corporal (Mosteller)
                <a class="help-link" href="#explicacao-bsa" title="Clique para entender Mosteller vs DuBois">?</a>
              </label>
              <div><span id="bsa" class="value-sm">‚Äî</span><span class="unit">m¬≤</span></div>
            </div>
          </div>
        </div>
        <div class="field span-3">
          <div class="field-row">
            <div class="subfield">
              <label for="at">Tempo de acelera√ß√£o <span class="suffix">(ms)</span></label>
              <input id="at" inputmode="decimal" placeholder="ex.: 90" type="text" />
            </div>
            <div class="subfield">
              <label for="et">Tempo de eje√ß√£o <span class="suffix">(ms)</span></label>
              <input id="et" inputmode="decimal" placeholder="ex.: 300" type="text" />
            </div>
          </div>
        </div>
      </div>

      <div id="warn" class="warning">Informe valores num√©ricos positivos. VTI Ao, gradiente m√©dio, velocidade m√°xima, tempos e dados antropom√©tricos n√£o podem ser 0.</div>

      <div class="results">
        <div class="card">
          <div class="small">√Årea da valva a√≥rtica</div>
          <div><span id="ava" class="value">‚Äî</span><span class="unit">cm¬≤</span></div>
          <div class="small">AVA indexada</div>
          <div><span id="avaIndexed" class="value-sm">‚Äî</span><span class="unit">cm¬≤/m¬≤</span></div>
        </div>
        <div class="card">
          <div class="small">Rela√ß√£o GM/AVA (&gt; 25 mmHg/cm¬≤ sugere severidade)<a class="help-link" href="#explicacao-gmava" title="Clique para entender a rela√ß√£o GM/AVA">?</a></div>
          <div><span id="gmAva" class="value">‚Äî</span><span class="unit">mmHg/cm¬≤</span></div>
        </div>
        <div class="card">
          <div class="small">Volume sist√≥lico ejetado (SV)</div>
          <div><span id="sv" class="value">‚Äî</span><span class="unit">mL</span></div>
          <div class="small">SV indexado</div>
          <div><span id="svi" class="value">‚Äî</span><span class="unit">mL/m¬≤</span></div>
          
        </div>
        <div class="card">
          <div class="small">DVI (VTI VSVE / VTI Ao)</div>
          <div><span id="dvi" class="value">‚Äî</span></div>
        </div>
        <div class="card">
          <div class="small">Rela√ß√£o AT/ET<a class="help-link" href="#explicacao-atet" title="Clique para entender a rela√ß√£o AT/ET">?</a></div>
          <div><span id="atet" class="value">‚Äî</span></div>
          <div class="small">Taxa de fluxo m√©dia (QÃÑ)<a class="help-link" href="#explicacao-flow" title="Entenda a import√¢ncia da taxa de fluxo">?</a></div>
          <div><span id="flow" class="value">‚Äî</span><span class="unit">mL/s</span></div>
        </div>
      </div>

      <div class="actions">
        <button id="copySummary" class="copy-btn" type="button">Copiar resumo</button>
        <span id="copyStatus" class="copy-status" aria-live="polite"></span>
      </div>

      <div class="foot">Dica: voc√™ pode usar v√≠rgula ou ponto nos decimais.</div>
    </div>

    <section id="explicacao-atet" class="info-block">
      <h3>Por que observar a rela√ß√£o AT/ET?</h3>
      <p>A rela√ß√£o AT/ET (Acceleration Time / Ejection Time) tem papel importante como par√¢metro auxiliar na avalia√ß√£o da estenose a√≥rtica (EAo), especialmente quando h√° d√∫vidas sobre a gravidade do gradiente transvalvar ‚Äî seja em v√°lvulas nativas ou prot√©ticas.</p>

      <details class="explain">
        <summary>Saiba mais sobre AT/ET</summary>
        <p><strong>üîπ Conceito fisiol√≥gico</strong></p>
        <p>O AT representa o tempo entre o in√≠cio do fluxo sist√≥lico e o pico da velocidade transa√≥rtica. O ET √© o tempo total de eje√ß√£o do ventr√≠culo esquerdo. √Ä medida que a estenose se torna mais severa, o jato torna-se mais arredondado e tardio, com prolongamento de AT e, portanto, aumento da raz√£o AT/ET.</p>

        <p><strong>üîπ Valores de refer√™ncia segundo ASE 2024 (para pr√≥teses, extrapol√°vel ao nativo)</strong></p>
        <table class="small-table">
          <thead>
            <tr>
              <th>Par√¢metro</th>
              <th>Normal</th>
              <th>Suspeita de estenose</th>
              <th>Estenose significativa</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>AT (ms)</td>
              <td>&lt; 80</td>
              <td>80‚Äì100</td>
              <td>&gt; 100</td>
            </tr>
            <tr>
              <td>AT/ET</td>
              <td>&lt; 0,32</td>
              <td>0,32‚Äì0,37</td>
              <td>&gt; 0,37</td>
            </tr>
          </tbody>
        </table>
        <p>Esses limiares tamb√©m auxiliam na estenose a√≥rtica nativa, onde AT/ET &gt; 0,36‚Äì0,40 sugere fortemente estenose severa, especialmente quando o gradiente √© baixo e h√° d√∫vida diagn√≥stica (por exemplo, EAo de baixo fluxo e baixo gradiente com FE preservada).</p>

        <p><strong>üîπ Interpreta√ß√£o integrada</strong></p>
        <p>O AT/ET deve ser considerado em conjunto com outros √≠ndices: √°rea valvar (AVA) pelo m√©todo de continuidade, gradiente m√©dio, velocidade m√°xima e √≠ndice de velocidade (DVI). Ele √© menos dependente do fluxo do que o gradiente, mas ainda sens√≠vel √† fun√ß√£o ventricular e frequ√™ncia card√≠aca. Em pacientes com fun√ß√£o sist√≥lica reduzida ou ritmos irregulares, o valor isolado pode ser enganoso.</p>

        <p><strong>üîπ Aplica√ß√£o pr√°tica</strong></p>
        <p>√ötil em EAo com baixa √°rea valvar (&lt; 1 cm¬≤) mas gradiente &lt; 40 mmHg, ajudando a diferenciar estenose verdadeira de pseudoestenose. Pode ser aplicado tanto em repouso quanto sob ecocardiografia de estresse, onde um aumento desproporcional de AT/ET refor√ßa a presen√ßa de estenose funcionalmente significativa.</p>

        <p><strong>‚úÖ Resumo pr√°tico</strong></p>
        <ul>
          <li>AT/ET &lt; 0,32: fun√ß√£o valvar normal.</li>
          <li>0,32‚Äì0,37: poss√≠vel estenose.</li>
          <li>&gt; 0,37: estenose significativa (confirmar com AVA e gradiente).</li>
          <li>Vantagem: √∫til em situa√ß√µes de baixo fluxo e em pr√≥teses.</li>
          <li>Limita√ß√£o: dependente da fun√ß√£o sist√≥lica e frequ√™ncia card√≠aca.</li>
        </ul>
      </details>
    </section>

    <section id="explicacao-sv-et-fc" class="info-block">
      <h3>Taxa de fluxo, stroke volume e frequ√™ncia card√≠aca</h3>
      <p><strong>Conceito (Ao flow rate):</strong> a taxa de fluxo a√≥rtico (Q) representa o fluxo volum√©trico m√©dio durante a eje√ß√£o ventricular esquerda.</p>
      <p><strong>F√≥rmula:</strong> Q = SV / ET</p>
      <p>onde SV (stroke volume) √© o volume ejetado por batimento e ET (ejection time) √© a dura√ß√£o da eje√ß√£o (em segundos). O resultado √© expresso em mL/s (ou cm¬≥/s) e descreve o fluxo m√©dio instant√¢neo durante a eje√ß√£o, n√£o ao longo de todo o ciclo card√≠aco.</p>

      <h4>Por que a frequ√™ncia card√≠aca (FC) n√£o entra?</h4>
      <p>Q = SV / ET mede a taxa m√©dia de eje√ß√£o durante o per√≠odo de eje√ß√£o, enquanto o d√©bito por minuto considera todo o ciclo.</p>
      <ul>
        <li><strong>SV / ET</strong> ‚Äî considera apenas o tempo de eje√ß√£o ‚Äî taxa de eje√ß√£o m√©dia (mL/s)</li>
        <li><strong>SV √ó FC</strong> ‚Äî considera todo o ciclo card√≠aco ‚Äî d√©bito card√≠aco (mL/min)</li>
        <li><strong>(SV / ET) √ó FC</strong> ‚Äî mistura de conceitos ‚Äî n√£o representa um fluxo fisiol√≥gico √∫til</li>
      </ul>
      <p>A FC modifica o d√©bito card√≠aco total (SV √ó FC), mas n√£o altera a taxa m√©dia de eje√ß√£o dentro de cada batimento, desde que o volume e a mec√¢nica contr√°til permane√ßam constantes. O ET j√° reflete indiretamente a influ√™ncia da FC ‚Äî quando a FC aumenta, o ciclo encurta e o ET tende a diminuir; assim, a raz√£o SV/ET incorpora essa adapta√ß√£o.</p>

      <h4>Interpreta√ß√£o pr√°tica</h4>
      <ul>
        <li><strong>Low-flow (baixo fluxo):</strong> SV/ET &lt; ~200 mL/s</li>
        <li><strong>Normal-flow:</strong> SV/ET ‚â• ~200‚Äì250 mL/s</li>
      </ul>
      <p>Crit√©rio especialmente √∫til em estenose a√≥rtica de baixo gradiente (ex.: Lancellotti et al., Heart 2018).</p>

      <h4>Resumo</h4>
      <ul>
        <li>A raz√£o SV/ET avalia fluxo m√©dio de eje√ß√£o, n√£o d√©bito por minuto.</li>
        <li>A FC n√£o entra porque o ET j√° incorpora a varia√ß√£o do ciclo.</li>
        <li>Para fluxo global sist√™mico, usa-se SV √ó FC (d√©bito card√≠aco).</li>
        <li>Para avaliar ‚Äúlow-flow‚Äù valvar, usa-se SV/ET, pois reflete o fluxo real durante a eje√ß√£o, determinante do gradiente e da carga sobre a valva a√≥rtica.</li>
      </ul>
    </section>

    <section id="explicacao-bsa" class="info-block">
      <h3>Superf√≠cie corporal (BSA): Mosteller vs DuBois</h3>
      <p>Esta calculadora utiliza a f√≥rmula de Mosteller para estimar a superf√≠cie corporal (BSA), por ser simples, amplamente adotada e com resultados muito pr√≥ximos aos de DuBois na maioria dos pacientes.</p>

      <h4>F√≥rmulas</h4>
      <ul>
        <li><strong>Mosteller</strong> (m¬≤) = sqrt((altura(cm) √ó peso(kg)) / 3600)</li>
        <li><strong>DuBois</strong> (m¬≤) = 0,007184 √ó peso(kg)^0,425 √ó altura(cm)^0,725</li>
      </ul>

      <h4>Diferen√ßas pr√°ticas</h4>
      <ul>
        <li><strong>Simplicidade:</strong> Mosteller √© mais f√°cil de lembrar e calcular.</li>
        <li><strong>Precis√£o cl√≠nica:</strong> Para faixas usuais de peso/altura, as diferen√ßas entre Mosteller e DuBois costumam ser pequenas (geralmente &lt; 2%).</li>
        <li><strong>Origem dos m√©todos:</strong> DuBois (1916) foi derivada de uma amostra pequena; Mosteller (1987) simplifica mantendo boa concord√¢ncia.</li>
        <li><strong>Impacto na indexa√ß√£o:</strong> Pequenas varia√ß√µes de BSA podem alterar ligeiramente valores indexados (ex.: AVAi, SVI). Mantenha consist√™ncia do m√©todo ao comparar exames.</li>
      </ul>
      <p><strong>Nota:</strong> Para manter consist√™ncia neste app, todos os √≠ndices por BSA usam Mosteller.</p>

      <h4>Refer√™ncias</h4>
      <ul>
        <li>Mosteller RD. Simplified calculation of body-surface area. N Engl J Med. 1987;317(17):1098.</li>
        <li>DuBois D, DuBois EF. A formula to estimate the approximate surface area if height and weight be known. Arch Intern Med (Chic). 1916;17(6):863‚Äì871.</li>
      </ul>
    </section>

    <section id="explicacao-gmava" class="info-block">
      <h3>Por que a raz√£o GM/AVA importa?</h3>
      <p>Em pacientes com AS de baixo fluxo e baixo gradiente (LG-AS), a raz√£o MG/EOA oferece uma vis√£o adicional da gravidade hemodin√¢mica.</p>

      <details class="explain">
        <summary>Entenda a raz√£o GM/AVA</summary>
        <ol>
          <li>√â um par√¢metro ecocardiogr√°fico novo e robusto, medido em repouso, capaz de diferenciar a AS verdadeira da pseudo-grave com alta precis√£o.</li>
          <li>Um cutoff de MG/EOA ‚â• 25 mmHg/cm¬≤ √© ideal para identificar estenose a√≥rtica verdadeiramente severa (TSAS) e se associa a maior risco de AVR ou mortalidade por todas as causas.</li>
          <li>Pode complementar a avalia√ß√£o da gravidade da AS junto ao dobutamine stress echo (DSE) ou √† pontua√ß√£o de c√°lcio da valva a√≥rtica (AVC) por tomografia.</li>
        </ol>
      </details>
    </section>

    <section id="explicacao-flow" class="info-block">
      <h3>Por que a taxa de fluxo importa na estenose a√≥rtica?</h3>
      <p>Nos casos de estenose a√≥rtica com discord√¢ncia entre √°rea valvar (AVA) e gradiente m√©dio, especialmente no fen√≥tipo low-flow, low-gradient (LFLG), a taxa de fluxo transvalvar (Q) √© crucial para entender a hemodin√¢mica e definir a gravidade real da doen√ßa.</p>

      <h4>1. Conceito de baixo fluxo</h4>
      <p>Diretrizes ESC/EACTS 2025 e o consenso ASE/ESC sobre estresse valvar definem baixo fluxo quando o volume sist√≥lico indexado (SVI) √© &lt; 35 mL/m¬≤ ou a taxa de fluxo m√©dia (Q) √© &lt; 200 mL/s.</p>
      <p><strong>F√≥rmula:</strong> Q = SV / ET &nbsp;&nbsp;|&nbsp;&nbsp; SV derivado do VTI do LVOT e ET em segundos.</p>
      <p>Fluxo reduzido leva a gradientes menores mesmo em estenoses anatomicamente graves, resultando em AVA ‚â§ 1,0 cm¬≤ com gradiente &lt; 40 mmHg.</p>

      <h4>2. Papel fisiopatol√≥gico</h4>
      <p>O gradiente m√©dio depende do fluxo (ŒîP ‚àù Q¬≤). Em baixo d√©bito, p√≥s-carga elevada ou remodelamento com cavidade pequena, a energia cin√©tica diminui e o gradiente fica subestimado. A AVA pela continuidade pode superestimar a severidade se houver erro no LVOT ou fluxo muito baixo.</p>

      <h4>3. Aplica√ß√£o cl√≠nica</h4>
      <p>Na estenose LFLG com fra√ß√£o de eje√ß√£o reduzida, usa-se ecocardiografia com dobutamina de baixa dose para avaliar reserva contr√°til (‚Üë SV ‚â• 20%) e a resposta de AVA/gradiente:</p>
      <ul>
        <li>Gradiente m√©dio ‚â• 40 mmHg com AVA ‚â§ 1,0 cm¬≤ ‚Üí estenose verdadeiramente grave.</li>
        <li>Gradiente &lt; 40 mmHg com AVA &gt; 1,0 cm¬≤ ‚Üí pseudograve (estenose moderada).</li>
      </ul>
      <p>No fen√≥tipo paradoxal (FE preservada), fluxos m√©dios e o √≠ndice de fluxo projetado ajudam a reconhecer o impacto do d√©bito reduzido por hipertrofia e rigidez diast√≥lica. O fluxo projetado (Qproj) normaliza o gradiente para 250 mL/s e possui forte correla√ß√£o com desfechos.</p>

      <h4>4. Interpreta√ß√£o integrada (ESC/EACTS 2025)</h4>
      <ol>
        <li>Confirmar medidas e excluir erros t√©cnicos.</li>
        <li>Calcular SVI e/ou Q m√©dio.</li>
        <li>Se baixo fluxo, investigar disfun√ß√£o sist√≥lica ou fen√≥tipo paradoxal.</li>
        <li>Persistindo d√∫vida, recorrer ao estresse farmacol√≥gico ou ao calcium score valvar (‚â• 2000 AU homens, ‚â• 1200 AU mulheres sugerem estenose grave).</li>
      </ol>
      <p><strong>Resumo:</strong> O fluxo √© o determinante prim√°rio do gradiente. Utilizar Q m√©dio e Q projetado permite distinguir estenose verdadeiramente grave de pseudograve, orientando com mais seguran√ßa a indica√ß√£o de TAVI ou cirurgia.</p>
    </section>

    <script>
      function parsePtNumber(str) {
        if (typeof str !== 'string') return NaN;
        // Permite v√≠rgula ou ponto; remove espa√ßos.
        const cleaned = str.replace(/\s+/g, '').replace(',', '.');
        return cleaned ? Number(cleaned) : NaN;
      }

      const els = {
        vtiLvot: document.getElementById('vtiLvot'),
        vtiAo: document.getElementById('vtiAo'),
        diametro: document.getElementById('diametro'),
        gradienteMedio: document.getElementById('gradienteMedio'),
        velocidadeMax: document.getElementById('velocidadeMax'),
        at: document.getElementById('at'),
        et: document.getElementById('et'),
        peso: document.getElementById('peso'),
        altura: document.getElementById('altura'),
        ava: document.getElementById('ava'),
        avaIndexed: document.getElementById('avaIndexed'),
        gmAva: document.getElementById('gmAva'),
        sv: document.getElementById('sv'),
        svi: document.getElementById('svi'),
        bsa: document.getElementById('bsa'),
        dvi: document.getElementById('dvi'),
        atet: document.getElementById('atet'),
        flow: document.getElementById('flow'),
        warn: document.getElementById('warn'),
        copyBtn: document.getElementById('copySummary'),
        copyStatus: document.getElementById('copyStatus')
      };

      const state = {
        ava: NaN,
        avaIndexed: NaN,
        dvi: NaN,
        svi: NaN,
        atet: NaN,
        flow: NaN,
        gmAva: NaN
      };
      let copyStatusTimer;

      function format(val) {
        // Mostra com 2 casas decimais e v√≠rgula como separador local
        return isFinite(val) ? val.toFixed(2).replace('.', ',') : '‚Äî';
      }
      function formatRatio(val) {
        return isFinite(val) ? val.toFixed(2).replace('.', ',') : '‚Äî';
      }
      function formatSummaryValue(val, decimals) {
        if (!isFinite(val)) return null;
        if (decimals === 0) {
          return String(Math.round(val));
        }
        return val.toFixed(decimals).replace('.', ',');
      }

      function recompute() {
        const vtiLvot = parsePtNumber(els.vtiLvot.value);
        const vtiAo = parsePtNumber(els.vtiAo.value);
        const d = parsePtNumber(els.diametro.value);
        const gradienteMedio = parsePtNumber(els.gradienteMedio.value);
        const velocidadeMax = parsePtNumber(els.velocidadeMax.value);
        const at = parsePtNumber(els.at.value);
        const et = parsePtNumber(els.et.value);
        const peso = parsePtNumber(els.peso.value);
        const altura = parsePtNumber(els.altura.value);

        state.ava = NaN;
        state.avaIndexed = NaN;
        state.dvi = NaN;
        state.svi = NaN;
        state.atet = NaN;
        state.flow = NaN;
        state.gmAva = NaN;

        const invalidRequired = !isFinite(vtiLvot) || !isFinite(vtiAo) || !isFinite(d) || vtiLvot <= 0 || vtiAo <= 0 || d <= 0;
        const atProvided = els.at.value !== '';
        const etProvided = els.et.value !== '';
        const validAt = atProvided && isFinite(at) && at > 0;
        const validEt = etProvided && isFinite(et) && et > 0;
        const invalidAt = atProvided && !validAt;
        const invalidEt = etProvided && !validEt;
        const gmProvided = els.gradienteMedio.value !== '';
        const validGm = gmProvided && isFinite(gradienteMedio) && gradienteMedio > 0;
        const invalidGm = gmProvided && !validGm;
        const velMaxProvided = els.velocidadeMax.value !== '';
        const validVelMax = velMaxProvided && isFinite(velocidadeMax) && velocidadeMax > 0;
        const invalidVelMax = velMaxProvided && !validVelMax;
        const pesoProvided = els.peso.value !== '';
        const alturaProvided = els.altura.value !== '';
        const validPeso = pesoProvided && isFinite(peso) && peso > 0;
        const validAltura = alturaProvided && isFinite(altura) && altura > 0;
        const invalidAnthro = (pesoProvided && !validPeso) || (alturaProvided && !validAltura);

        const hasRequiredInput = els.vtiLvot.value || els.vtiAo.value || els.diametro.value;
        const hasAtEtInput = els.at.value || els.et.value;
        const hasAnthroInput = els.peso.value || els.altura.value;
        els.warn.style.display =
          (invalidRequired && hasRequiredInput) ||
          ((invalidAt || invalidEt) && hasAtEtInput) ||
          (invalidGm && gmProvided) ||
          (invalidVelMax && velMaxProvided) ||
          (invalidAnthro && hasAnthroInput)
            ? 'block'
            : 'none';

        let strokeVolume = NaN;
        let avaValue = NaN;

        if (invalidRequired) {
          els.ava.textContent = '‚Äî';
          els.avaIndexed.textContent = '‚Äî';
          els.sv.textContent = '‚Äî';
          els.svi.textContent = '‚Äî';
          els.bsa.textContent = '‚Äî';
          els.dvi.textContent = '‚Äî';
          els.flow.textContent = '‚Äî';
          els.gmAva.textContent = '‚Äî';
        } else {
          // CSA em cm¬≤
          const csa = Math.PI * Math.pow(d / 2, 2);
          // AVA em cm¬≤ pela continuidade
          avaValue = (csa * vtiLvot) / vtiAo;
          const dvi = vtiLvot / vtiAo;
          strokeVolume = csa * vtiLvot; // em mL (cm¬≥)

          const avaDisplay = formatSummaryValue(avaValue, 1);
          els.ava.textContent = avaDisplay !== null ? avaDisplay : '‚Äî';
          const svDisplay = formatSummaryValue(strokeVolume, 0);
          els.sv.textContent = svDisplay !== null ? svDisplay : '‚Äî';
          els.dvi.textContent = formatRatio(dvi);
          state.ava = avaValue;
          state.dvi = dvi;
        }

        let bsaValue = NaN;
        if (validPeso && validAltura) {
          // Mosteller: BSA (m¬≤) = sqrt( (altura(cm) * peso(kg)) / 3600 )
          bsaValue = Math.sqrt((peso * altura) / 3600);
          els.bsa.textContent = isFinite(bsaValue) ? format(bsaValue) : '‚Äî';
          if (!invalidRequired && isFinite(avaValue) && isFinite(bsaValue) && bsaValue > 0) {
            const avaIdx = avaValue / bsaValue;
            if (isFinite(avaIdx)) {
              const avaIdxDisplay = formatSummaryValue(avaIdx, 2);
              els.avaIndexed.textContent = avaIdxDisplay !== null ? avaIdxDisplay : '‚Äî';
              state.avaIndexed = avaIdx;
            } else {
              els.avaIndexed.textContent = '‚Äî';
              state.avaIndexed = NaN;
            }
          } else {
            els.avaIndexed.textContent = '‚Äî';
            state.avaIndexed = NaN;
          }
        } else if (!pesoProvided && !alturaProvided) {
          els.bsa.textContent = '‚Äî';
          els.avaIndexed.textContent = '‚Äî';
          state.avaIndexed = NaN;
        } else if (pesoProvided || alturaProvided) {
          els.bsa.textContent = '‚Äî';
          els.avaIndexed.textContent = '‚Äî';
          state.avaIndexed = NaN;
        }

        if (!invalidRequired && isFinite(strokeVolume) && isFinite(bsaValue) && bsaValue > 0) {
          const svi = strokeVolume / bsaValue;
          if (isFinite(svi)) {
            const sviDisplay = formatSummaryValue(svi, 0);
            els.svi.textContent = sviDisplay !== null ? sviDisplay : '‚Äî';
            state.svi = svi;
          } else {
            els.svi.textContent = '‚Äî';
            state.svi = NaN;
          }
        } else {
          els.svi.textContent = '‚Äî';
          state.svi = NaN;
        }

        if ((invalidRequired || !isFinite(avaValue) || avaValue <= 0) && !(validPeso && validAltura)) {
          els.avaIndexed.textContent = '‚Äî';
          state.avaIndexed = NaN;
        }

        if (!atProvided && !etProvided) {
          els.atet.textContent = '‚Äî';
          state.atet = NaN;
        } else if (!invalidAt && !invalidEt && validAt && validEt) {
          const ratio = at / et;
          if (isFinite(ratio)) {
            els.atet.textContent = formatRatio(ratio);
            state.atet = ratio;
          } else {
            els.atet.textContent = '‚Äî';
            state.atet = NaN;
          }
        } else {
          els.atet.textContent = '‚Äî';
          state.atet = NaN;
        }

        if (!invalidRequired && !invalidEt && validEt) {
          const etSeconds = et / 1000;
          const flowRate = etSeconds > 0 && isFinite(strokeVolume) ? strokeVolume / etSeconds : NaN;
          if (isFinite(flowRate)) {
            const flowDisplay = formatSummaryValue(flowRate, 0);
            els.flow.textContent = flowDisplay !== null ? flowDisplay : '‚Äî';
            state.flow = flowRate;
          } else {
            els.flow.textContent = '‚Äî';
            state.flow = NaN;
          }
        } else {
          els.flow.textContent = '‚Äî';
          state.flow = NaN;
        }

        if (!invalidRequired && gmProvided && !invalidGm && isFinite(avaValue) && avaValue > 0) {
          const ratio = gradienteMedio / avaValue;
          if (isFinite(ratio)) {
            const formatted = formatSummaryValue(ratio, 0);
            if (formatted !== null) {
              els.gmAva.textContent = formatted;
            } else {
              els.gmAva.textContent = '‚Äî';
            }
            state.gmAva = ratio;
          } else {
            els.gmAva.textContent = '‚Äî';
            state.gmAva = NaN;
          }
        } else {
          els.gmAva.textContent = '‚Äî';
          state.gmAva = NaN;
        }
      }

      ['input', 'change'].forEach(evt => {
        els.vtiLvot.addEventListener(evt, recompute);
        els.vtiAo.addEventListener(evt, recompute);
        els.diametro.addEventListener(evt, recompute);
        els.gradienteMedio.addEventListener(evt, recompute);
        els.velocidadeMax.addEventListener(evt, recompute);
        els.at.addEventListener(evt, recompute);
        els.et.addEventListener(evt, recompute);
        els.peso.addEventListener(evt, recompute);
        els.altura.addEventListener(evt, recompute);
      });

      function buildSummary() {
        const parts = ['Valva a√≥rtica calcificada, com c√∫spides restritas.'];
        const velMax = parsePtNumber(els.velocidadeMax.value);
        if (isFinite(velMax) && velMax > 0) {
          const formatted = formatSummaryValue(velMax, 1);
          if (formatted !== null) {
            parts.push(`Vmax = ${formatted} m/s.`);
          }
        }
        const gradiente = parsePtNumber(els.gradienteMedio.value);
        if (isFinite(gradiente) && gradiente > 0) {
          const formatted = formatSummaryValue(gradiente, 0);
          if (formatted !== null) {
            parts.push(`Gradiente sist√≥lico m√©dio = ${formatted} mmHg.`);
          }
        }
        if (Number.isFinite(state.ava) && state.ava > 0) {
          const formatted = formatSummaryValue(state.ava, 1);
          if (formatted !== null) {
            parts.push(`√Årea valvar = ${formatted} cm¬≤.`);
          }
        }
        if (Number.isFinite(state.avaIndexed) && state.avaIndexed > 0) {
          const formatted = formatSummaryValue(state.avaIndexed, 2);
          if (formatted !== null) {
            parts.push(`AVAi = ${formatted} cm¬≤/m¬≤.`);
          }
        }
        if (Number.isFinite(state.dvi) && state.dvi > 0) {
          const formatted = formatSummaryValue(state.dvi, 2);
          if (formatted !== null) {
            parts.push(`DVI = ${formatted}.`);
          }
        }
        const diametro = parsePtNumber(els.diametro.value);
        if (isFinite(diametro) && diametro > 0) {
          const formatted = formatSummaryValue(diametro, 1);
          if (formatted !== null) {
            parts.push(`VSVE = ${formatted} cm.`);
          }
        }
        if (Number.isFinite(state.svi) && state.svi > 0) {
          const formatted = formatSummaryValue(state.svi, 0);
          if (formatted !== null) {
            parts.push(`Volume sist√≥lico ejetado = ${formatted} ml/m¬≤.`);
          }
        }
        
        return parts.join(' ');
      }

      function copyTextToClipboard(text) {
        if (navigator.clipboard && typeof navigator.clipboard.writeText === 'function') {
          return navigator.clipboard.writeText(text);
        }
        return new Promise((resolve, reject) => {
          try {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.setAttribute('readonly', '');
            textarea.style.position = 'absolute';
            textarea.style.left = '-9999px';
            document.body.appendChild(textarea);
            textarea.select();
            textarea.setSelectionRange(0, textarea.value.length);
            const successful = document.execCommand('copy');
            document.body.removeChild(textarea);
            if (successful) {
              resolve();
            } else {
              reject(new Error('execCommand falhou'));
            }
          } catch (err) {
            reject(err);
          }
        });
      }

      function showCopyStatus(message, type = 'success') {
        if (!els.copyStatus) return;
        els.copyStatus.textContent = message;
        els.copyStatus.classList.remove('success', 'error');
        if (type === 'success') {
          els.copyStatus.classList.add('success');
        } else if (type === 'error') {
          els.copyStatus.classList.add('error');
        }
        if (copyStatusTimer) {
          clearTimeout(copyStatusTimer);
        }
        copyStatusTimer = window.setTimeout(() => {
          els.copyStatus.textContent = '';
          els.copyStatus.classList.remove('success', 'error');
        }, 4000);
      }

      if (els.copyBtn) {
        els.copyBtn.addEventListener('click', async () => {
          const summary = buildSummary();
          try {
            await copyTextToClipboard(summary);
            showCopyStatus('Resumo copiado!', 'success');
          } catch (error) {
            console.error('Falha ao copiar resumo', error);
            showCopyStatus('N√£o foi poss√≠vel copiar.', 'error');
          }
        });
      }

      // Valores de exemplo para testar rapidamente
      // Descomente se quiser ver um exemplo carregado.
      // els.vtiLvot.value = '20,0';
      // els.vtiAo.value = '40,0';
      // els.diametro.value = '2,0';
      // recompute();
    </script>
  </body>
</html>
